[gd_scene load_steps=10 format=3 uid="uid://bob4cono2210x"]

[ext_resource type="Script" uid="uid://buyxwg18seq7k" path="res://scripts/main_menu.gd" id="1_l6cm7"]
[ext_resource type="AudioStream" uid="uid://rfypht13otg3" path="res://assets/music/theme.mp3" id="2_ekxnf"]
[ext_resource type="MeshLibrary" uid="uid://o0cyi1eyon7h" path="res://new_mesh_lib.tres" id="3_bqqt6"]
[ext_resource type="Shader" uid="uid://cvgyuhtt27ehl" path="res://assets/shaders/pixelate.gdshader" id="3_wu84c"]
[ext_resource type="PackedScene" uid="uid://cpkpu723k1j3g" path="res://scenes/blood_particles.tscn" id="5_8ln24"]

[sub_resource type="Curve3D" id="Curve3D_bqqt6"]
closed = true
bake_interval = 15.0
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1.5, 0, 1.5, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, -1.5, 0, 1.5, 0, 0, 0, 0, 0, 0, -2, 0, 0, 0, 0, 0, 0, 0, 0, -1.5, 0, -1.5, 0, 0, 0, 0, 0, 0, 0, 0, -2, 0, 0, 0, 0, 0, 0, 1.465, 0, -1.335),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 8

[sub_resource type="GDScript" id="GDScript_bqqt6"]
script/source = "extends PathFollow3D

func _physics_process(delta: float) -> void:
	progress_ratio += delta * 0.1
"

[sub_resource type="GDScript" id="GDScript_wu84c"]
script/source = "extends Camera3D

func _physics_process(_delta: float) -> void:
	look_at($\"../../..\".global_position)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8ln24"]
shader = ExtResource("3_wu84c")
shader_parameter/pixel_size = 6
shader_parameter/screen_size = Vector2(1280, 720)

[node name="MainMenu" type="Node"]
script = ExtResource("1_l6cm7")

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="Button" type="Button" parent="Control"]
custom_minimum_size = Vector2(200, 100)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -4.0
offset_top = -4.0
offset_right = 4.0
offset_bottom = 4.0
grow_horizontal = 2
grow_vertical = 2
text = "New Game"

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("2_ekxnf")
volume_db = -15.0
autoplay = true

[node name="Node3D" type="Node3D" parent="."]

[node name="Path3D" type="Path3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.20326, 0)
curve = SubResource("Curve3D_bqqt6")

[node name="PathFollow3D" type="PathFollow3D" parent="Node3D/Path3D"]
transform = Transform3D(-0.948683, 0, 0.316228, 0, 1, 0, -0.316228, 0, -0.948683, 2, 0, 0)
script = SubResource("GDScript_bqqt6")

[node name="Camera3D" type="Camera3D" parent="Node3D/Path3D/PathFollow3D"]
transform = Transform3D(0.316228, 0.67082, -0.67082, 1.49012e-08, 0.707107, 0.707107, 0.948683, -0.223607, 0.223607, 0, 0, 0)
fov = 55.7
script = SubResource("GDScript_wu84c")

[node name="ColorRect2" type="ColorRect" parent="Node3D/Path3D/PathFollow3D/Camera3D"]
material = SubResource("ShaderMaterial_8ln24")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="GridMap" type="GridMap" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.03005, 0)
mesh_library = ExtResource("3_bqqt6")
cell_size = Vector3(2, 1, 2)
data = {
"cells": PackedInt32Array(0, 0, 0, 0, 65535, 655361, 65535, 0, 655361, 65535, 65535, 655360, 1, 65534, 655361, 65534, 1, 655361, 65534, 65535, 655361, 65535, 65534, 655361, 1, 0, 655361, 0, 1, 655361, 65534, 0, 655360, 65534, 65534, 655360, 0, 65534, 655360, 1, 65535, 655360, 1, 1, 655360, 65535, 1, 655360, 65537, 2, 1048578, 65536, 2, 1048579, 131071, 2, 1048578, 131070, 2, 1048579, 131069, 1, 3, 131069, 0, 2, 131069, 65535, 3, 131069, 65534, 2, 131070, 65533, 1441794, 131071, 65533, 1441795, 65536, 65533, 1441794, 65537, 65533, 1441795, 65538, 65534, 655363, 65538, 65535, 655362, 65538, 0, 655363, 65538, 1, 655362, 65538, 65533, 655364, 65538, 2, 1048580, 131069, 2, 4, 131069, 65533, 1441796, 131074, 3, 1048578, 131073, 3, 1048579, 131072, 3, 1048578, 196607, 3, 1048579, 196606, 3, 1048578, 196605, 3, 1048579, 0, 2, 1048579, 65538, 3, 1441796, 131075, 3, 1048580, 131075, 65532, 655364, 196604, 65532, 1441796, 196604, 3, 4, 196604, 65533, 2, 196604, 65534, 3, 196605, 65532, 1441794, 196606, 65532, 1441795, 131074, 65532, 1441795, 131075, 65533, 655363, 131072, 65532, 1441795, 196607, 65532, 1441794, 131073, 65532, 1441794, 131075, 65534, 655362, 131075, 0, 655362, 131075, 2, 655362, 131075, 65535, 655363, 131075, 1, 655363, 196604, 0, 3, 196604, 2, 3, 196604, 1, 2, 196604, 65535, 2)
}
metadata/_editor_floor_ = Vector3(0, 2, 0)

[node name="GPUParticles3D" parent="Node3D" instance=ExtResource("5_8ln24")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -5.70242, 0)
emitting = true
one_shot = false
visibility_aabb = AABB(-9.665, -4, -4, 20, 20, 20)

[connection signal="pressed" from="Control/Button" to="." method="start_game"]
